
# OD和OC门

在电路中常会遇到漏极开路（Open Drain）和集电极开路（Open Collector）两种情形。漏极开路电路概念中提到的“漏”是指 MOSFET的漏极。同理，集电极开路电路中的“集”就是指三极管的集电极。在数字电路中，分别简称OD门和OC门。

##  集电极开路输出

典型的集电极开路电路如图所示。电路中右侧的三极管集电极什么都不接，所以叫做集电极开路，左侧的三极管用于反相作用，即左侧输入“0”时左侧三极管截止，VCC通过电阻加到右侧三极管基极，右侧三极管导通，右侧输出端连接到地，输出“0”。

![c_open1](/doc/image/c_open1.jpg)

从图中电路可以看出集电极开路是无法输出高电平的，如果要想输出高电平可以在输出端加上上拉电阻。因此集电极开路输出可以用做电平转换，通过上拉电阻上拉至不同的电压，来实现不同的电平转换。

用做驱动器。由于OC门电路的输出管的集电极悬空，使用时需外接一个上拉电阻Rp到电源VCC。OC门使用上拉电阻以输出高电平，此外为了加大输出引脚的驱动能力，上拉电阻阻值的选择原则，从降低功耗及芯片的灌电流能力考虑应当足够大；从确保足够的驱动电流考虑应当足够小。

将OC门输出连在一起时，再通过一个电阻接外电源，可以实现“线与”逻辑关系。只要电阻的阻值和外电源电压的数值选择得当，就能做到既保证输出的高、低电平符合要求，而且输出三极管的负载电流又不至于过大。

集电极开路输出除了可以实现多门的线与逻辑关系外，通过使用大功率的三极管还可用于直接驱动较大电流的负载，如继电器、脉冲变压器、指示灯等

## 漏极开路输出

和集电极开路一样，顾名思义，开漏电路就是指从MOSFET的漏极输出的电路。典型的用法是在漏极外部的电路添加上拉电阻到电源如图所示。完整的开漏电路应由开漏器件和开漏上拉电阻组成。这里的上拉电阻R的阻值决定了逻辑电平转换的上升/下降沿的速度。阻值越大，速度越低，功耗越小。因此在选择上拉电阻时要兼顾功耗和速度。标准的开漏脚一般只有输出的能力。添加其它的判断电路，才能具备双向输入、输出的能力。


![d_open1](/doc/image/d_open1.png)

很多单片机等器件的I/O就是漏极开路形式，或者可以配置成漏极开路输出形式，如51单片机的P0口就为漏极开路输出。在实际应用中可以将多个开漏输出的引脚连接到一条线上，这样就形成“线与逻辑”关系。注意这个公共点必须接一个上拉电阻。当这些引脚的任一路变为逻辑0后，开漏线上的逻辑就为0了。在I2C等接口总线中就用此法判断总线占用状态。

同集电极开路一样，利用外部电路的驱动能力，减少IC内部的驱动。当IC内部MOSFET导通时，驱动电流是从外部的VCC流经上拉电阻，再经MOSFET到GND。IC内部仅需很下的栅极驱动电流，因此漏极开路也常用于驱动电路中。
